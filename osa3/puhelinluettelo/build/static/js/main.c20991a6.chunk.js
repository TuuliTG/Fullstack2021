(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(17),a=t.n(c),o=t(8),u=t(3),s=t(0),i=function(e){var n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())||void 0!==n.number&&n.number.includes(e.filter)}));return Object(s.jsx)("ul",{children:n.map((function(n){return Object(s.jsxs)("li",{children:[n.name," ",n.number,Object(s.jsx)("button",{onClick:function(){return e.deletePerson(n)},children:"Delete"})]},n.id)}))})},d=function(e){return Object(s.jsxs)("div",{children:["search ",Object(s.jsx)("input",{value:e.searchBar,onChange:function(n){return e.setSearchBar(n.target.value)}})]})},l=function(e){return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:function(n){n.preventDefault(),e.addPersons()},children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:e.newName,onChange:function(n){console.log(n.target.value),e.setName(n.target.value)}})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:e.newNumber,onChange:function(n){e.setNewNumber(n.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},f=t(4),j=t.n(f),b="/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},m=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){var n="".concat(b,"/").concat(e);return j.a.delete(n).then((function(e){return e.data}))},p=function(e){return null===e.message?null:Object(s.jsx)("div",{className:e.message.classText,children:e.message.text})},x=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),f=Object(u.a)(a,2),j=f[0],b=f[1],x=Object(r.useState)(""),g=Object(u.a)(x,2),w=g[0],N=g[1],S=Object(r.useState)(""),C=Object(u.a)(S,2),k=C[0],y=C[1],B=Object(r.useState)(null),D=Object(u.a)(B,2),P=D[0],T=D[1];Object(r.useEffect)((function(){h().then((function(e){c(e)}))}),[]);var A=function(e,n){T({text:e,classText:n}),setTimeout((function(){T(null)}),5e3)},E=function(e){var n=e.person,r=Object(o.a)(Object(o.a)({},n),{},{number:w});O(n.id,r).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),J();var r="Updated ".concat(e.name);A(r,"message")})).catch((function(e){var t="".concat(n.name," was already deleted from the server.");A(t,"error")}))},J=function(){b(""),N("")};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(p,{message:P}),Object(s.jsx)(d,{searchBar:k,setSearchBar:function(e){return y(e)}}),Object(s.jsx)("h2",{children:"Add a new contact"}),Object(s.jsx)(l,{persons:t,setName:function(e){return b(e)},setNewNumber:function(e){return N(e)},addPersons:function(){var e=t.some((function(e){return e.name===j}));if(e)if(window.confirm("".concat(j," is already added to phonebook. Do you want to update the number?"))){var n=t.find((function(e){return e.name===j}));E({person:n})}else J();else{var r=w.length>0;m({name:j,number:r?w:""}).then((function(e){c(t.concat(e)),J();var n="Added ".concat(e.name);A(n,"message")})).catch((function(e){console.log(e.response.data),A(e.response.data.error,"error")}))}},newName:j,newNumber:w}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(i,{persons:t,deletePerson:function(e){return function(e){console.log("".concat(e," needs to be deleted"));var n=t.find((function(n){return n.id===e})).name;window.confirm("Delete ".concat(n," ?"))&&v(e).then((function(r){console.log("deleted",r),c(t.filter((function(n){return n.id!==e})));var a="Deleted ".concat(n);A(a,"message")}))}(e.id)},filter:k})]})};t(41);a.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.c20991a6.chunk.js.map