{"version":3,"sources":["components/Persons.js","components/Search.js","components/AddPersonForm.js","services/persons.js","components/notification.js","App.js","index.js"],"names":["Persons","props","filtered","persons","filter","person","name","toLowerCase","includes","undefined","number","map","onClick","deletePerson","id","Search","value","searchBar","onChange","event","setSearchBar","target","Form","onSubmit","preventDefault","addPersons","newName","console","log","setName","newNumber","setNewNumber","type","baseUrl","axios","get","then","response","data","newObject","post","put","url","delete","Notification","message","className","classText","text","App","useState","setPersons","setNewName","setNumber","setMessage","useEffect","personService","initialPersons","messageSetup","msg","setTimeout","updatePerson","changedPerson","returnedPerson","p","emptyForm","catch","error","isAlreadyOnList","some","window","confirm","find","hasNumber","length","concat","returned","deletePersonWithId","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.df48fcad.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Persons = (props) => {\n    const filtered = props.persons.filter( \n        person => \n        person.name.toLowerCase().includes(props.filter.toLowerCase())\n        || (person.number !== undefined && person.number.includes(props.filter))\n    )\n    \n    return (\n        <ul>\n            {filtered.map(person =>\n            <li key={person.id}>\n              {person.name} {person.number}\n              <button onClick={() => props.deletePerson(person)}>Delete</button>\n            </li>\n          )}\n        </ul>\n    )\n}\n\nexport default Persons","import React from \"react\";\n\nconst Search = (props) => {\n    const handleSearchBarChange = (event) => \n        props.setSearchBar(event.target.value)\n    \n    return (\n        <div>\n            search <input value={props.searchBar} onChange={handleSearchBarChange}/>\n        </div>\n    )\n}\n\nexport default Search","import React from \"react\";\n\nconst Form = (props) => {\n    const addName = (event) => {\n        event.preventDefault()\n        props.addPersons()\n\n      }\n\n    const handleNameChange = (event) => {\n        console.log(event.target.value)\n        props.setName(event.target.value)\n    }\n    \n    const handleNumberChange = (event) => {\n        props.setNewNumber(event.target.value)\n    }\n    return (\n        <div>\n            <form onSubmit={addName}>\n                <div>\n                name: <input value={props.newName} onChange={handleNameChange}/>\n                </div>\n                <div>\n                number: <input value={props.newNumber} onChange={handleNumberChange}/>\n                </div>\n                <div>\n                <button type=\"submit\">add</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default Form","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = id => {\n    const url = `${baseUrl}/${id}`\n\n    const request = axios.delete(url)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, deletePerson }","import React from \"react\"\n\nconst Notification = ( props ) => {\n    if (props.message === null) {\n      return null\n    }\n  \n    return (\n      <div className={props.message.classText}>\n        {props.message.text}\n      </div>\n    )\n  }\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport Search from './components/Search'\nimport Form from './components/AddPersonForm'\nimport personService from './services/persons'\nimport Notification from './components/notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNumber] = useState('')\n  const [searchBar, setSearchBar] = useState('')\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(initialPersons => {\n        console.log('promise fulfilled')\n        setPersons(initialPersons)\n      })\n  }, [])\n  \n  const addNewPersons = () => {\n    const isAlreadyOnList = persons.some(person => person.name === newName)\n    \n    if (isAlreadyOnList) {\n      if (window.confirm(`${newName} is already added to phonebook. Do you want to update the number?`)) {\n        const person = persons.find(p => p.name === newName)\n        \n        updatePerson({person})\n      } else {\n        emptyForm() \n      }\n      \n    } else {\n      const hasNumber = newNumber.length > 0\n      const nameObject = {\n        name: newName,\n        number: hasNumber ? newNumber : ''\n      }\n\n      personService\n        .create(nameObject)\n        .then(returnedPerson => {\n          console.log('successful post')\n          setPersons(persons.concat(returnedPerson))\n          emptyForm()\n          const text = `Added ${returnedPerson.name}`   \n          messageSetup(text, \"message\")\n        })\n    }\n    \n  }\n\n  const messageSetup = ( message, classText ) => {\n    const msg = {text: message, classText: classText}\n    console.log(\"Message\", msg)\n    setMessage(msg)\n    setTimeout(() => {\n      setMessage(null)\n    }, 5000)\n  }\n\n  const updatePerson = ({person}) => {\n    console.log('Updating',{person})\n    const changedPerson = { ...person, number: newNumber }\n    \n    personService\n      .update(person.id, changedPerson)\n      .then(returnedPerson => {\n        setPersons(persons.map(p => p.id !== person.id ? p : returnedPerson))\n        emptyForm()\n        const text = `Updated ${returnedPerson.name}`\n        messageSetup(text, \"message\")\n      })\n      .catch(error => {\n        const text = `${person.name} was already deleted from the server.`\n        messageSetup(text, \"error\")\n      })\n  }\n\n  const deletePersonWithId = (id) => {\n    console.log(`${id} needs to be deleted`)\n    const name = persons.find(p => p.id === id).name\n    if (window.confirm(`Delete ${name} ?`)) {\n      personService\n        .deletePerson(id)\n        .then(returned => {\n          console.log('deleted',returned)\n          setPersons(persons.filter(p => p.id !== id))\n          const text = `Deleted ${name}`\n          messageSetup(text, 'message')\n      })\n    }\n    \n  }\n  const emptyForm = () => {\n    setNewName('')\n    setNumber('')\n  }\n  const setName = (name) => setNewName(name)\n  const setNewNumber = (number) => setNumber(number)\n  const setSearchBarText = (text) => setSearchBar(text)\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Search searchBar={searchBar} setSearchBar={setSearchBarText}></Search>\n      <h2>Add a new contact</h2>\n      <Form persons={persons} setName={setName} setNewNumber={setNewNumber} addPersons={addNewPersons} newName={newName}\n        newNumber={newNumber}\n      >\n      </Form>\n      <h2>Numbers</h2>\n      <Persons persons = {persons} deletePerson = {(person) => deletePersonWithId(person.id)} filter={searchBar}></Persons>\n    </div>\n  )\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n"],"sourceRoot":""}